<!DOCTYPE html>
<html lang="pt-br">
<head>
	<title>Cadastro de Imóvel</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 
	<style>

	body {
		padding-top: 30px;
	}

	h2 {
		border-bottom: solid 1px black;
		padding-bottom: 5px;
		margin-bottom: 30px;
	}
  
	</style>
	
	<script>
     
	function sendForm()
	{
		$("#divSuccessMsg").hide();
		$("#divErrorMsg").hide();

		document.getElementById("btnCadastraAluno").disabled = true;    
		var formAluno = document.getElementById("formCadAluno");
		var formData = new FormData(formAluno);  // Ver datalhes em https://developer.mozilla.org/pt-BR/docs/Web/API/FormData/FormData

		$.ajax({
			url: 'adicionaNovoAluno.php',
			method: "POST",
			data: formData,
			
			cache: false,
			processData: false,  // Diz ao jQuery para não processar os dados do formulário (ver detalhes em http://api.jquery.com/jquery.ajax/)   
			contentType: false,  // Diz ao jQuery para não definir cabeçalho de contentType (ver detalhes em http://api.jquery.com/jquery.ajax/)   

			success: function (result) {

				if (result)
				{
					document.getElementById('divSuccessMsg').innerHTML = "Dados salvos com sucesso: " + result;    
					$("#divSuccessMsg").stop().fadeIn(200).delay(2500).fadeOut(200);
					document.getElementById("btnCadastraAluno").disabled = false;
					document.getElementById("formCadAluno").reset(); 
				}
				else
					showMessageError(result);
			},

			error: function (xhr, status, error) {

				var errorMsg = xhr.responseText;
				document.getElementById("errorMsg").innerText = errorMsg;
				$("#divErrorMsg").fadeIn(200);
				document.getElementById("btnCadastraAluno").disabled = false;
			}
		});
	}
	
	function showMessageError(message)
	{
		document.getElementById("errorMsg").innerHTML = message;
		$("#divErrorMsg").fadeIn(200);
	}	
	
	</script>
	
</head>
<body>

<!-- Formulário de cadastro de aluno -->
<div class="container">

  <h2 style="text-align: center">Cadastro de Imóvel</h2>
  <form name="formCadAluno" id="formCadAluno" class="form-horizontal" action="" method="post" onsubmit="return checkForm();">
  
    <div class="form-group">
      <label for="titulo" class="control-label col-sm-2">Título:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control"  id="titulo" name="titulo" placeholder="Informe o número de matrícula completo" required>
      </div>
    </div>
    <div class="form-group">
      <label for="rua" class="control-label col-sm-2">Rua:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="rua" name="rua" placeholder="Informe o rua completo" required>
      </div>
    </div>
    <div class="form-group">
      <label for="numero" class="control-label col-sm-2">Numero:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="numero" name="numero" placeholder="E-mail">
      </div>
    </div>	
	
    <div class="form-group">
      <label for="bairro" class="control-label col-sm-2">Bairro:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="bairro" name="senha" placeholder="Senha" required>
      </div>
    </div>
    
    <button id="btnCadastraAluno" type="button" class="btn btn-primary" style="width: 100%; margin-bottom: 10px;" onclick="sendForm();"> Cadastrar </button>
  </form>
  
  <div class="alert alert-success" id="divSuccessMsg" style="display: none; margin-top: 10px;">
    <strong>Cadastro realizado com sucesso: </strong><span id="successMsg"></span>
  </div>

  <div class="alert alert-danger" id="divErrorMsg" style="display: none; margin-top: 10px;">
    <strong>A operação não pode ser realizada: </strong><span id="errorMsg"></span>
  </div>
  
</div>

</body>
</html>